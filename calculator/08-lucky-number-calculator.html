<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M√°y T√≠nh S·ªë Ch·ªß ƒê·∫°o - Th·∫ßn S·ªë H·ªçc</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" xintegrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">

    <style>
        /* CSS Variables cho Light & Dark Mode */
        :root {
            --bg-color: #f0f2f5;
            --text-color: #212529;
            --card-bg-color: #ffffff;
            --card-border-color: rgba(0,0,0,.1);
            --primary-color: #6f42c1; /* M√†u t√≠m huy·ªÅn b√≠ */
            --primary-hover-color: #5a359a;
            --result-color: #a450e3;
        }

        body.dark-mode {
            --bg-color: #121212;
            --text-color: #e9e9e9; /* Ch·ªØ s√°ng h∆°n */
            --card-bg-color: #1e1e1e;
            --card-border-color: rgba(255,255,255,.15);
            --primary-color: #bb86fc; /* M√†u t√≠m n·ªïi b·∫≠t h∆°n */
            --primary-hover-color: #a362ff;
            --result-color: #d1b3ff; /* M√†u k·∫øt qu·∫£ s√°ng v√† r·ª±c r·ª° h∆°n */
        }

        /* General Styling */
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s, color 0.3s;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .main-content {
            flex: 1;
        }

        /* App Title */
        .app-title {
            font-weight: 900;
            color: var(--primary-color);
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
            transition: color 0.3s;
        }

        /* Main App Card */
        .calculator-card {
            background-color: var(--card-bg-color);
            border: 1px solid var(--card-border-color);
            color: var(--text-color); /* <<< FIX: √Åp d·ª•ng m√†u ch·ªØ cho to√†n b·ªô card */
            border-radius: 1.25rem;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
            transition: background-color 0.3s, border-color 0.3s, color 0.3s; /* Th√™m "color" v√†o transition */
            max-width: 500px;
        }
        
        .form-label {
            font-weight: 700;
        }

        /* Buttons */
        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
            font-weight: 700;
            padding: 0.75rem;
            border-radius: 0.75rem;
            /* Ch·ªânh m√†u ch·ªØ tr√™n n√∫t ƒë·ªÉ t∆∞∆°ng ph·∫£n */
            color: var(--bg-color); 
        }
        .btn-primary:hover {
            background-color: var(--primary-hover-color);
            border-color: var(--primary-hover-color);
            color: var(--bg-color);
        }
        
        body:not(.dark-mode) .btn-primary {
            color: #ffffff;
        }
        body:not(.dark-mode) .btn-primary:hover {
            color: #ffffff;
        }

        .btn-outline-secondary {
            border-radius: 0.75rem;
            padding: 0.75rem;
        }
        
        body.dark-mode .btn-outline-secondary {
             color: var(--text-color);
             border-color: var(--card-border-color);
        }

        /* Result Display */
        #result-container {
            display: none;
        }
        
        #lucky-number {
            font-size: 5rem;
            font-weight: 900;
            color: var(--result-color);
            transition: color 0.3s;
            text-shadow: 0 0 25px var(--result-color), 0 0 10px rgba(255,255,255,0.3); /* TƒÉng hi·ªáu ·ª©ng ph√°t s√°ng */
        }

        #interpretation {
            font-size: 1.1rem;
            line-height: 1.6;
        }

        /* C·∫£i thi·ªán ƒë·ªô t∆∞∆°ng ph·∫£n cho text-muted trong dark mode */
        body.dark-mode .text-muted {
            color: rgba(233, 233, 233, 0.65) !important;
        }
        
        /* Dark Mode Toggle Button */
        #darkModeToggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1050;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        /* Footer */
        footer {
            color: #888;
            font-size: 0.9rem;
        }
        body.dark-mode footer {
            color: #666;
        }
    </style>
</head>
<body class="dark-mode">

    <!-- Dark Mode Toggle -->
    <button id="darkModeToggle" class="btn btn-outline-secondary">
        ‚òÄÔ∏è
    </button>
    
    <!-- Main Content Container -->
    <div class="container main-content d-flex flex-column justify-content-center py-5">
        <h1 class="app-title text-center mb-4">M√°y T√≠nh S·ªë Ch·ªß ƒê·∫°o</h1>

        <!-- Calculator Card -->
        <div class="card calculator-card p-4 p-md-5 mx-auto w-100">
            <div class="card-body">
                <form id="numerology-form">
                    <div class="mb-4">
                        <label for="birthdate" class="form-label fs-5">Ch·ªçn ng√†y sinh c·ªßa b·∫°n:</label>
                        <input type="date" class="form-control form-control-lg" id="birthdate" required>
                    </div>

                    <div class="d-grid gap-2">
                        <button type="submit" class="btn btn-primary btn-lg">Xem k·∫øt qu·∫£</button>
                        <button type="button" id="clearBtn" class="btn btn-outline-secondary btn-lg">X√≥a</button>
                    </div>
                </form>

                <!-- Result Area -->
                <div id="result-container" class="mt-5 text-center">
                    <h5 class="text-muted">Con s·ªë ch·ªß ƒë·∫°o c·ªßa b·∫°n l√†</h5>
                    <p id="lucky-number" class="display-1"></p>
                    <p id="interpretation" class="mt-3"></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="text-center py-3">
        <p class="mb-0">DOTPHONGLONG Mini App</p>
    </footer>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" xintegrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <!-- Main JavaScript Logic -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements
            const form = document.getElementById('numerology-form');
            const birthdateInput = document.getElementById('birthdate');
            const clearBtn = document.getElementById('clearBtn');
            const resultContainer = document.getElementById('result-container');
            const luckyNumberEl = document.getElementById('lucky-number');
            const interpretationEl = document.getElementById('interpretation');
            const darkModeToggle = document.getElementById('darkModeToggle');
            const body = document.body;

            // D·ªØ li·ªáu di·ªÖn gi·∫£i √Ω nghƒ©a c√°c con s·ªë
            const interpretations = {
                1: 'S·ªë 1: Ng∆∞·ªùi ti√™n phong, ƒë·ªôc l·∫≠p v√† ƒë·∫ßy tham v·ªçng. B·∫°n c√≥ t·ªë ch·∫•t l√£nh ƒë·∫°o b·∫©m sinh v√† lu√¥n n·ªó l·ª±c ƒë·ªÉ ƒë·∫°t ƒë∆∞·ª£c m·ª•c ti√™u c·ªßa m√¨nh.',
                2: 'S·ªë 2: Ng∆∞·ªùi h√≤a gi·∫£i, nh·∫°y c·∫£m v√† gi√†u l√≤ng tr·∫Øc ·∫©n. B·∫°n l√† ng∆∞·ªùi k·∫øt n·ªëi tuy·ªát v·ªùi, lu√¥n t√¨m ki·∫øm s·ª± c√¢n b·∫±ng v√† h√≤a h·ª£p.',
                3: 'S·ªë 3: Ng∆∞·ªùi truy·ªÅn c·∫£m h·ª©ng, s√°ng t·∫°o v√† c√≥ √≥c h√†i h∆∞·ªõc. B·∫°n c√≥ kh·∫£ nƒÉng giao ti·∫øp t·ªët v√† lu√¥n mang l·∫°i ni·ªÅm vui cho m·ªçi ng∆∞·ªùi.',
                4: 'S·ªë 4: Ng∆∞·ªùi th·ª±c t·∫ø, ·ªïn ƒë·ªãnh v√† chƒÉm ch·ªâ. B·∫°n l√† n·ªÅn t·∫£ng v·ªØng ch·∫Øc, lu√¥n l√†m vi·ªác c√≥ k·∫ø ho·∫°ch v√† ƒë√°ng tin c·∫≠y.',
                5: 'S·ªë 5: Ng∆∞·ªùi y√™u t·ª± do, th√≠ch phi√™u l∆∞u v√† m·∫°o hi·ªÉm. B·∫°n khao kh√°t kh√°m ph√° nh·ªØng ƒëi·ªÅu m·ªõi m·∫ª v√† kh√¥ng ng·∫°i thay ƒë·ªïi.',
                6: 'S·ªë 6: Ng∆∞·ªùi nu√¥i d∆∞·ª°ng, c√≥ tr√°ch nhi·ªám v√† y√™u th∆∞∆°ng. B·∫°n lu√¥n quan t√¢m, chƒÉm s√≥c cho gia ƒë√¨nh v√† c·ªông ƒë·ªìng c·ªßa m√¨nh.',
                7: 'S·ªë 7: Ng∆∞·ªùi t√¨m ki·∫øm tri th·ª©c, c√≥ tr·ª±c gi√°c t·ªët v√† s√¢u s·∫Øc. B·∫°n th√≠ch ph√¢n t√≠ch, t√¨m hi·ªÉu v√† kh√°m ph√° nh·ªØng b√≠ ·∫©n c·ªßa cu·ªôc s·ªëng.',
                8: 'S·ªë 8: Ng∆∞·ªùi c√≥ quy·ªÅn l·ª±c, t·ª± tin v√† tham v·ªçng v·∫≠t ch·∫•t. B·∫°n c√≥ kh·∫£ nƒÉng ƒëi·ªÅu h√†nh, qu·∫£n l√Ω v√† ƒë·∫°t ƒë∆∞·ª£c th√†nh c√¥ng l·ªõn v·ªÅ t√†i ch√≠nh.',
                9: 'S·ªë 9: Ng∆∞·ªùi nh√¢n ƒë·∫°o, c√≥ l√≤ng v·ªã tha v√† l√Ω t∆∞·ªüng. B·∫°n c√≥ tr√°i tim r·ªông m·ªü, lu√¥n mong mu·ªën c·ªëng hi·∫øn v√† gi√∫p ƒë·ª° ng∆∞·ªùi kh√°c.',
                11: 'S·ªë 11 (Master): Ng∆∞·ªùi c√≥ tr·ª±c gi√°c si√™u nh·∫°y, mang nƒÉng l∆∞·ª£ng t√¢m linh m·∫°nh m·∫Ω. B·∫°n c√≥ kh·∫£ nƒÉng truy·ªÅn c·∫£m h·ª©ng v√† khai s√°ng cho ng∆∞·ªùi kh√°c.',
                22: 'S·ªë 22 (Master): Ng∆∞·ªùi ki·∫øn t·∫°o b·∫≠c th·∫ßy, c√≥ kh·∫£ nƒÉng bi·∫øn ∆∞·ªõc m∆° th√†nh hi·ªán th·ª±c. B·∫°n l√† ng∆∞·ªùi v·ª´a c√≥ l√Ω t∆∞·ªüng l·ªõn, v·ª´a c√≥ kh·∫£ nƒÉng th·ª±c thi phi th∆∞·ªùng.'
            };
            
            // H√†m t√≠nh t·ªïng c√°c ch·ªØ s·ªë c·ªßa m·ªôt s·ªë
            function sumDigits(num) {
                return String(num).split('').reduce((acc, digit) => acc + Number(digit), 0);
            }

            // H√†m t√≠nh con s·ªë ch·ªß ƒë·∫°o
            function calculateLifePathNumber(dateString) {
                if (!dateString) return null;

                const digits = dateString.replace(/-/g, '');
                let sum = sumDigits(digits);

                // Ti·∫øp t·ª•c c·ªông d·ªìn cho ƒë·∫øn khi l√† s·ªë c√≥ 1 ch·ªØ s·ªë ho·∫∑c l√† 11, 22
                while (sum > 9 && sum !== 11 && sum !== 22) {
                    sum = sumDigits(sum);
                }
                
                return sum;
            }

            // X·ª≠ l√Ω s·ª± ki·ªán submit form
            form.addEventListener('submit', function(e) {
                e.preventDefault(); // NgƒÉn ch·∫∑n form g·ª≠i ƒëi
                const birthdate = birthdateInput.value;
                if (!birthdate) {
                    // Y√™u c·∫ßu ng∆∞·ªùi d√πng nh·∫≠p ng√†y
                    birthdateInput.focus();
                    return;
                }
                
                const luckyNumber = calculateLifePathNumber(birthdate);
                
                if (luckyNumber && interpretations[luckyNumber]) {
                    luckyNumberEl.textContent = luckyNumber;
                    interpretationEl.textContent = interpretations[luckyNumber];
                    resultContainer.style.display = 'block'; // Hi·ªÉn th·ªã k·∫øt qu·∫£
                }
            });

            // X·ª≠ l√Ω s·ª± ki·ªán n√∫t X√≥a
            clearBtn.addEventListener('click', function() {
                birthdateInput.value = '';
                resultContainer.style.display = 'none'; // ·∫®n k·∫øt qu·∫£
                luckyNumberEl.textContent = '';
                interpretationEl.textContent = '';
            });

            // X·ª≠ l√Ω Dark Mode Toggle
            darkModeToggle.addEventListener('click', function() {
                body.classList.toggle('dark-mode');
                
                // C·∫≠p nh·∫≠t icon cho n√∫t toggle
                if (body.classList.contains('dark-mode')) {
                    darkModeToggle.textContent = '‚òÄÔ∏è'; // Sun icon for switching to light mode
                } else {
                    darkModeToggle.textContent = 'üåô'; // Moon icon for switching to dark mode
                }
            });
        });
    </script>
</body>
</html>
