<!DOCTYPE html>
<html lang="vi" data-bs-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trắc Nghiệm Nhanh</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" xintegrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    
    <!-- Bootstrap Icons for Dark Mode Toggle -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <!-- Google Fonts: Be Vietnam Pro -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        /* General Styling */
        body {
            font-family: 'Be Vietnam Pro', sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }

        /* App Container Styling */
        .app-container {
            max-width: 700px;
            margin: auto;
            padding-top: 50px;
            padding-bottom: 50px;
        }

        /* Quiz Card Styling */
        .quiz-card {
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: box-shadow 0.3s;
        }

        [data-bs-theme="dark"] .quiz-card {
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
        }

        /* Answer Button Styling */
        .answer-btn {
            font-size: 1.1rem;
            width: 100%;
            text-align: left;
        }

        /* Feedback Styling for Buttons */
        .btn.correct {
            background-color: #198754 !important; /* Green for correct */
            color: white !important;
            border-color: #198754 !important;
        }

        .btn.incorrect {
            background-color: #dc3545 !important; /* Red for incorrect */
            color: white !important;
            border-color: #dc3545 !important;
        }

        /* Next Button Styling */
        #next-btn {
            font-weight: bold;
            width: 50%;
            margin: auto;
        }

        /* Dark Mode Toggle Button */
        #dark-mode-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body class="bg-body-tertiary">

    <!-- Dark Mode Toggle Button -->
    <button class="btn btn-outline-secondary" id="dark-mode-toggle" title="Chuyển chế độ Sáng/Tối">
        <i class="bi bi-moon-stars-fill"></i>
    </button>

    <div class="app-container">
        <!-- App Title -->
        <h1 class="text-center fw-bold mb-4">Trắc Nghiệm Vui</h1>

        <!-- Quiz Application Card -->
        <div class="card quiz-card">
            <div class="card-body p-4 p-md-5">

                <!-- Quiz View -->
                <div id="quiz-view">
                    <!-- Progress and Question -->
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h2 id="question-text" class="fs-4 fw-bold mb-0">Đây là nội dung câu hỏi?</h2>
                        <span id="progress-text" class="badge bg-primary rounded-pill fs-6">Câu 1/10</span>
                    </div>

                    <!-- Answer Options -->
                    <div id="answer-buttons" class="d-grid gap-3 mb-4">
                        <!-- Buttons will be generated by JS -->
                    </div>

                    <!-- Next Button -->
                    <div class="d-flex justify-content-center mt-4">
                        <button id="next-btn" class="btn btn-primary btn-lg d-none">Câu tiếp theo</button>
                    </div>
                </div>

                <!-- Result View (Initially hidden) -->
                <div id="result-view" class="text-center d-none">
                    <h2 class="fw-bold mb-3">Hoàn Thành!</h2>
                    <p id="score-text" class="fs-4 mb-4">Bạn đã trả lời đúng 8/10 câu.</p>
                    <button id="restart-btn" class="btn btn-success btn-lg">Làm lại bài</button>
                </div>

            </div>
        </div>

        <!-- Footer -->
        <footer class="text-center text-muted mt-4">
            DOTPHONGLONG Mini App
        </footer>
    </div>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" xintegrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <!-- Main Application Logic -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- DATA: Questions and Answers ---
            const questions = [
                {
                    question: "Thủ đô của Việt Nam là thành phố nào?",
                    answers: [
                        { text: "TP. Hồ Chí Minh", correct: false },
                        { text: "Đà Nẵng", correct: false },
                        { text: "Hà Nội", correct: true },
                        { text: "Hải Phòng", correct: false }
                    ]
                },
                {
                    question: "Đâu là ngọn núi cao nhất Việt Nam?",
                    answers: [
                        { text: "Fansipan", correct: true },
                        { text: "Pu Si Lung", correct: false },
                        { text: "Bà Đen", correct: false },
                        { text: "Bạch Mã", correct: false }
                    ]
                },
                {
                    question: "Trong HTML, thẻ nào được dùng để tạo một đoạn văn bản?",
                    answers: [
                        { text: "<div>", correct: false },
                        { text: "<span>", correct: false },
                        { text: "<p>", correct: true },
                        { text: "<h1>", correct: false }
                    ]
                },
                {
                    question: "Ngôn ngữ lập trình nào phổ biến nhất để phát triển web phía client?",
                    answers: [
                        { text: "Python", correct: false },
                        { text: "JavaScript", correct: true },
                        { text: "Java", correct: false },
                        { text: "C#", correct: false }
                    ]
                },
                {
                    question: "Phở là món ăn truyền thống của nước nào?",
                    answers: [
                        { text: "Thái Lan", correct: false },
                        { text: "Trung Quốc", correct: false },
                        { text: "Nhật Bản", correct: false },
                        { text: "Việt Nam", correct: true }
                    ]
                },
                 {
                    question: "CSS là viết tắt của từ gì?",
                    answers: [
                        { text: "Creative Style Sheets", correct: false },
                        { text: "Computer Style Sheets", correct: "false" },
                        { text: "Colorful Style Sheets", correct: false },
                        { text: "Cascading Style Sheets", correct: true }
                    ]
                },
                {
                    question: "Hành tinh nào được biết đến với tên gọi 'Hành tinh Đỏ'?",
                    answers: [
                        { text: "Trái Đất", correct: false },
                        { text: "Sao Hỏa (Mars)", correct: true },
                        { text: "Sao Mộc (Jupiter)", correct: false },
                        { text: "Sao Kim (Venus)", correct: false }
                    ]
                },
                {
                    question: "Tác giả của 'Truyện Kiều' là ai?",
                    answers: [
                        { text: "Hồ Xuân Hương", correct: false },
                        { text: "Bà Huyện Thanh Quan", correct: false },
                        { text: "Nguyễn Du", correct: true },
                        { text: "Nguyễn Trãi", correct: false }
                    ]
                },
                {
                    question: "Đồng tiền chính thức của Nhật Bản là gì?",
                    answers: [
                        { text: "Yên", correct: true },
                        { text: "Won", correct: false },
                        { text: "Nhân dân tệ", correct: false },
                        { text: "Đô la", correct: false }
                    ]
                },
                {
                    question: "Bootstrap là một framework cho ngôn ngữ nào?",
                    answers: [
                        { text: "Python/Django", correct: false },
                        { text: "PHP/Laravel", correct: false },
                        { text: "HTML, CSS, và JS", correct: true },
                        { text: "Ruby/Rails", correct: false }
                    ]
                }
            ];

            // --- DOM Elements ---
            const quizView = document.getElementById('quiz-view');
            const resultView = document.getElementById('result-view');
            const questionTextEl = document.getElementById('question-text');
            const answerButtonsEl = document.getElementById('answer-buttons');
            const progressTextEl = document.getElementById('progress-text');
            const nextBtn = document.getElementById('next-btn');
            const scoreTextEl = document.getElementById('score-text');
            const restartBtn = document.getElementById('restart-btn');
            const darkModeToggle = document.getElementById('dark-mode-toggle');
            const htmlEl = document.documentElement;

            // --- State Variables ---
            let currentQuestionIndex = 0;
            let score = 0;

            // --- Functions ---

            /**
             * Starts or restarts the quiz.
             */
            function startQuiz() {
                currentQuestionIndex = 0;
                score = 0;
                nextBtn.classList.add('d-none');
                resultView.classList.add('d-none');
                quizView.classList.remove('d-none');
                showQuestion();
            }

            /**
             * Displays the current question and answer options.
             */
            function showQuestion() {
                resetState();
                const currentQuestion = questions[currentQuestionIndex];
                const questionNo = currentQuestionIndex + 1;
                
                questionTextEl.innerText = currentQuestion.question;
                progressTextEl.innerText = `Câu ${questionNo}/${questions.length}`;

                currentQuestion.answers.forEach(answer => {
                    const button = document.createElement('button');
                    button.innerText = answer.text;
                    button.classList.add('btn', 'btn-outline-secondary', 'p-3', 'answer-btn');
                    answerButtonsEl.appendChild(button);

                    if (answer.correct) {
                        button.dataset.correct = answer.correct;
                    }

                    button.addEventListener('click', selectAnswer);
                });
            }
            
            /**
             * Resets the state for the next question (clears buttons, hides next button).
             */
            function resetState() {
                nextBtn.classList.add('d-none');
                while (answerButtonsEl.firstChild) {
                    answerButtonsEl.removeChild(answerButtonsEl.firstChild);
                }
            }

            /**
             * Handles the logic when a user selects an answer.
             * @param {Event} e The click event.
             */
            function selectAnswer(e) {
                const selectedBtn = e.target;
                const isCorrect = selectedBtn.dataset.correct === "true";

                if (isCorrect) {
                    score++;
                    selectedBtn.classList.add('correct');
                } else {
                    selectedBtn.classList.add('incorrect');
                }
                
                // Show correct answer and disable all buttons
                Array.from(answerButtonsEl.children).forEach(button => {
                    if (button.dataset.correct === "true") {
                        button.classList.add('correct');
                    }
                    button.disabled = true;
                });
                
                nextBtn.classList.remove('d-none');
            }

            /**
             * Shows the final result screen.
             */
            function showResult() {
                quizView.classList.add('d-none');
                resultView.classList.remove('d-none');
                scoreTextEl.innerText = `Bạn đã trả lời đúng ${score}/${questions.length} câu.`;
            }

            /**
             * Handles the next button click.
             */
            function handleNextButton() {
                currentQuestionIndex++;
                if (currentQuestionIndex < questions.length) {
                    showQuestion();
                } else {
                    showResult();
                }
            }

            /**
             * Toggles dark mode and saves the preference.
             */
            function toggleDarkMode() {
                const currentTheme = htmlEl.getAttribute('data-bs-theme');
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                htmlEl.setAttribute('data-bs-theme', newTheme);
                localStorage.setItem('theme', newTheme); // Save preference
                updateToggleIcon(newTheme);
            }

            /**
             * Updates the toggle icon based on the current theme.
             */
            function updateToggleIcon(theme) {
                 const icon = darkModeToggle.querySelector('i');
                if (theme === 'dark') {
                    icon.classList.remove('bi-moon-stars-fill');
                    icon.classList.add('bi-sun-fill');
                } else {
                    icon.classList.remove('bi-sun-fill');
                    icon.classList.add('bi-moon-stars-fill');
                }
            }
            
            /**
             * Applies the saved theme from localStorage on load.
             */
            function applySavedTheme() {
                const savedTheme = localStorage.getItem('theme') || 'light';
                htmlEl.setAttribute('data-bs-theme', savedTheme);
                updateToggleIcon(savedTheme);
            }


            // --- Event Listeners ---
            nextBtn.addEventListener('click', handleNextButton);
            restartBtn.addEventListener('click', startQuiz);
            darkModeToggle.addEventListener('click', toggleDarkMode);
            
            // --- Initial Setup ---
            applySavedTheme();
            startQuiz();
        });
    </script>
</body>
</html>
