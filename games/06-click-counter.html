<!DOCTYPE html>
<html lang="vi" data-bs-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game ƒê·∫øm S·ªë L·∫ßn Click</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" xintegrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;900&display=swap" rel="stylesheet">

    <style>
        /* CSS t√πy ch·ªânh */
        body {
            font-family: 'Nunito', sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }

        .main-container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .game-card {
            padding: 2rem;
            border-radius: 1.5rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease-in-out;
        }

        .display-stats {
            font-size: 2rem;
            font-weight: 700;
        }

        #click-button {
            padding: 2rem 1rem;
            font-size: 2.5rem;
            font-weight: 900;
            border-radius: 1rem;
            transition: transform 0.1s, box-shadow 0.2s;
            cursor: pointer;
            user-select: none; /* NgƒÉn ng∆∞·ªùi d√πng ch·ªçn vƒÉn b·∫£n tr√™n n√∫t */
        }
        
        #click-button:active:not(:disabled) {
            transform: scale(0.95);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        #start-button {
            font-size: 1.5rem;
            font-weight: 700;
            border-radius: 0.75rem;
        }

        .dark-mode-toggle {
            position: fixed;
            top: 1.5rem;
            right: 1.5rem;
            z-index: 1000;
        }

        footer {
            padding: 1rem 0;
            font-size: 0.9rem;
            opacity: 0.7;
        }

        /* T√πy ch·ªânh cho dark mode */
        [data-bs-theme="dark"] .game-card {
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            background-color: #343a40;
        }
    </style>
</head>
<body class="d-flex flex-column min-vh-100">

    <!-- N√∫t chuy·ªÉn ƒë·ªïi Dark Mode -->
    <div class="form-check form-switch dark-mode-toggle">
        <input class="form-check-input" type="checkbox" role="switch" id="darkModeSwitch">
        <label class="form-check-label" for="darkModeSwitch">üåô</label>
    </div>

    <!-- N·ªôi dung ch√≠nh c·ªßa ·ª©ng d·ª•ng -->
    <div class="container main-container">
        <div class="row justify-content-center">
            <div class="col-12 col-md-8 col-lg-6 text-center">
                
                <h1 class="display-4 fw-bold mb-4">Click Speed Challenge</h1>

                <div class="card game-card">
                    <div class="card-body">
                        
                        <!-- Hi·ªÉn th·ªã th√¥ng s·ªë game -->
                        <div class="d-flex justify-content-around align-items-center mb-4">
                            <div>
                                <h3 class="text-muted">ƒêI·ªÇM S·ªê</h3>
                                <p id="click-count" class="display-stats text-primary mb-0">0</p>
                            </div>
                            <div>
                                <h3 class="text-muted">TH·ªúI GIAN</h3>
                                <p id="timer" class="display-stats text-danger mb-0">10</p>
                            </div>
                            <div>
                                <h3 class="text-muted">K·ª∂ L·ª§C</h3>
                                <p id="high-score" class="display-stats text-success mb-0">0</p>
                            </div>
                        </div>

                        <!-- N√∫t b·∫•m ch√≠nh -->
                        <div class="d-grid gap-2 my-4">
                            <button id="click-button" class="btn btn-primary" disabled>
                                CLICK V√ÄO ƒê√ÇY!
                            </button>
                        </div>
                        
                        <!-- N√∫t b·∫Øt ƒë·∫ßu/ch∆°i l·∫°i -->
                        <div class="d-grid gap-2">
                             <button id="start-button" class="btn btn-lg btn-success">
                                B·∫Øt ƒë·∫ßu
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="mt-auto text-center text-muted">
        <p>DOTPHONGLONG Mini App</p>
    </footer>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" xintegrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <!-- Logic c·ªßa game -->
    <script>
        // --- L·∫•y c√°c ph·∫ßn t·ª≠ DOM ---
        const clickButton = document.getElementById('click-button');
        const startButton = document.getElementById('start-button');
        const clickCountDisplay = document.getElementById('click-count');
        const timerDisplay = document.getElementById('timer');
        const highScoreDisplay = document.getElementById('high-score');
        const darkModeSwitch = document.getElementById('darkModeSwitch');
        const htmlElement = document.documentElement;

        // --- Bi·∫øn tr·∫°ng th√°i c·ªßa game ---
        let clickCount = 0;
        let highScore = 0;
        let timeLeft = 10; // Th·ªùi gian m·∫∑c ƒë·ªãnh l√† 10 gi√¢y
        let timerInterval = null;
        let isGameRunning = false;

        // --- H√†m x·ª≠ l√Ω ch√≠nh ---

        /**
         * B·∫Øt ƒë·∫ßu m·ªôt v√°n ch∆°i m·ªõi
         */
        function startGame() {
            if (isGameRunning) return;

            // Reset tr·∫°ng th√°i
            isGameRunning = true;
            clickCount = 0;
            timeLeft = 10;
            
            // C·∫≠p nh·∫≠t giao di·ªán
            clickCountDisplay.textContent = clickCount;
            timerDisplay.textContent = timeLeft;
            startButton.textContent = 'ƒêang ch∆°i...';
            startButton.disabled = true;
            clickButton.disabled = false;
            clickButton.focus(); // T·∫≠p trung v√†o n√∫t click ƒë·ªÉ c√≥ th·ªÉ nh·∫•n Enter

            // B·∫Øt ƒë·∫ßu ƒë·∫øm ng∆∞·ª£c th·ªùi gian
            timerInterval = setInterval(updateTimer, 1000);
        }

        /**
         * C·∫≠p nh·∫≠t b·ªô ƒë·∫øm th·ªùi gian m·ªói gi√¢y
         */
        function updateTimer() {
            timeLeft--;
            timerDisplay.textContent = timeLeft;

            if (timeLeft <= 0) {
                endGame();
            }
        }

        /**
         * K·∫øt th√∫c v√°n ch∆°i
         */
        function endGame() {
            isGameRunning = false;
            clearInterval(timerInterval); // D·ª´ng b·ªô ƒë·∫øm th·ªùi gian

            // V√¥ hi·ªáu h√≥a n√∫t click
            clickButton.disabled = true;
            
            // K√≠ch ho·∫°t l·∫°i n√∫t b·∫Øt ƒë·∫ßu v√† ƒë·ªïi vƒÉn b·∫£n
            startButton.textContent = 'Ch∆°i l·∫°i';
            startButton.disabled = false;

            // Ki·ªÉm tra v√† c·∫≠p nh·∫≠t ƒëi·ªÉm cao nh·∫•t
            if (clickCount > highScore) {
                highScore = clickCount;
                highScoreDisplay.textContent = highScore;
            }
        }

        /**
         * X·ª≠ l√Ω s·ª± ki·ªán khi nh·∫•n n√∫t click ch√≠nh
         */
        function handleMainClick() {
            if (isGameRunning) {
                clickCount++;
                clickCountDisplay.textContent = clickCount;
            }
        }

        /**
         * Chuy·ªÉn ƒë·ªïi gi·ªØa ch·∫ø ƒë·ªô S√°ng v√† T·ªëi
         */
        function toggleDarkMode() {
            if (darkModeSwitch.checked) {
                htmlElement.setAttribute('data-bs-theme', 'dark');
            } else {
                htmlElement.setAttribute('data-bs-theme', 'light');
            }
        }

        // --- G√°n c√°c s·ª± ki·ªán ---
        startButton.addEventListener('click', startGame);
        clickButton.addEventListener('click', handleMainClick);
        darkModeSwitch.addEventListener('change', toggleDarkMode);

    </script>

</body>
</html>
